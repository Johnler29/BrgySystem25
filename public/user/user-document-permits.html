<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Request Documents â€” Barangay Langkaan II</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            'inter': ['Inter', 'system-ui', '-apple-system', 'sans-serif'],
          }
        }
      }
    }
  </script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/base.css">
</head>

<script defer src="/base-header.js"></script>
<script defer src="/base.js"></script>

<body class="font-inter">
<div class="dashboard-container">
  <nav class="sidebar" id="sidebar">
    <div class="sidebar-header">
      <img src="https://scontent.fmnl31-1.fna.fbcdn.net/v/t1.15752-9/566459805_2304695176635817_7965723576219961744_n.png?_nc_cat=100&ccb=1-7&_nc_sid=9f807c&_nc_eui2=AeFvsvFPtYKGEdwHZwyXJu6hLWJQAEjhjVotYlAASOGNWmCLSn6KIuOYN8ElKlNNHQrO159FSCuwFcll7OgdlzCP&_nc_ohc=yiA3bhEGnNAQ7kNvwGUy1mZ&_nc_oc=AdkuAJIw6rTtWuKWDNP7QJAFplSOwMhvUK5rJ7b_uZdCToSR1sT73c7CFJ5zrYhIU-I&_nc_zt=23&_nc_ht=scontent.fmnl31-1.fna&oh=03_Q7cD3gGocOn0qEMEx3iINh9aOx48m0LIlXIab9IT08mckx_JZw&oe=692126F5" alt="Logo">
      <h3 class="sidebar-title">Barangay Langkaan II<br><small style="font-size:0.85em;opacity:0.8;">Resident Portal</small></h3>
    </div>

    <ul class="sidebar-menu" id="navList">
      <li><a href="/user/dashboard" data-tooltip="Dashboard"><span class="icon">ğŸ ï¸</span><span class="label">Dashboard</span></a></li>
      <li><a href="/user/document-permits" class="active" data-tooltip="Request Documents"><span class="icon">ğŸ“„</span><span class="label">Request Documents</span></a></li>
      <li><a href="/user/community" data-tooltip="Community"><span class="icon">ğŸ¤</span><span class="label">Community</span></a></li>
      <li><a href="/user/cases" data-tooltip="Report Cases"><span class="icon">âš–ï¸</span><span class="label">Report Cases</span></a></li>
      <li><a href="/user/health" data-tooltip="Health Services"><span class="icon">ğŸ¥</span><span class="label">Health Services</span></a></li>
      <li><a href="/user/disaster" data-tooltip="Disaster Info"><span class="icon">ğŸš¨</span><span class="label">Disaster Info</span></a></li>

      <li style="margin-top:50px;"><a href="/user/settings" data-tooltip="Settings"><span class="icon">âš™ï¸</span><span class="label">Settings</span></a></li>
      <li><a href="#" onclick="fetch('/api/logout',{method:'POST'}).then(()=>location.href='/login')" data-tooltip="Log out"><span class="icon">ğŸšª</span><span class="label">Log out</span></a></li>
    </ul>
  </nav>

  <main class="main-content">
    <header class="header">
      <div class="header-left">
        <button class="hamburger" id="hamburgerBtn" aria-label="Toggle sidebar"><span></span></button>
        <h1 class="app-title">Request Documents</h1>
      </div>
      <div class="user-info" id="userChip">
        <button class="btn btn-outline" id="notifBtn" title="Notifications">ğŸ””</button>
        <div class="user-avatar" id="avatar">U</div>
        <span id="username" class="user-name">User</span>

        <div class="notif-panel" id="notifPanel">
          <div class="notif-head">Notifications</div>
          <div class="notif-item">No new notifications.</div>
        </div>

        <div class="dropdown" id="userMenu">
          <div class="item" id="goProfile">ğŸ‘¤ Profile</div>
          <div class="item" id="goSettings">âš™ï¸ Settings</div>
          <div class="item" id="doLogout">ğŸšª Log out</div>
        </div>
      </div>
    </header>

    <div class="content-area">
      <!-- Info Banner -->
      <div class="bg-[#1a237e] text-white px-5 py-4 rounded-lg mb-6 shadow-sm">
        <div class="flex items-start gap-3">
          <div class="text-xl mt-0.5">â„¹ï¸</div>
          <div>
            <strong class="font-semibold block mb-1">Resident Portal</strong>
            <p class="text-sm m-0 leading-relaxed opacity-95">View and request your documents here. Only your requests are visible.</p>
          </div>
        </div>
      </div>

      <!-- Action Bar -->
      <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6">
        <button class="inline-flex items-center gap-2 px-5 py-3 bg-[#3498db] hover:bg-[#2980b9] text-white font-semibold rounded-xl shadow-lg hover:shadow-xl transition-all duration-200" id="addNewBtn">
          <span class="text-lg">+</span>
          <span>Request New Document</span>
        </button>
        <div class="relative w-full sm:w-auto sm:min-w-[320px]">
          <div class="absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
            </svg>
          </div>
          <input id="searchInput" type="text" placeholder="Search by type, purpose..." class="w-full pl-12 pr-4 py-3 bg-white rounded-xl border border-gray-200 focus:border-[#3498db] focus:ring-2 focus:ring-[#3498db]/20 outline-none transition-all shadow-sm hover:shadow-md"/>
        </div>
      </div>

      <!-- Table Card -->
      <div class="bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden">
        <div class="overflow-x-auto">
          <table class="w-full" id="docsTable">
            <thead class="bg-gray-50">
              <tr>
                <th class="px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase tracking-wider border-b border-gray-200">Type of Document</th>
                <th class="px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase tracking-wider border-b border-gray-200">Number of Copies</th>
                <th class="px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase tracking-wider border-b border-gray-200">Date Requested</th>
                <th class="px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase tracking-wider border-b border-gray-200">Date Released</th>
                <th class="px-6 py-4 text-left text-xs font-bold text-gray-600 uppercase tracking-wider border-b border-gray-200">Status</th>
              </tr>
            </thead>
            <tbody id="reqTbody" class="divide-y divide-gray-100 [&_tr:hover]:bg-blue-50/50 transition-colors">
              <!-- rows injected by user-document-permits.js -->
            </tbody>
          </table>
        </div>
      </div>

      <div class="pager mt-6" id="pager" style="display:none"></div>
    </div>
  </main>
</div>

<!-- Add/Edit Modal -->
<div class="fixed inset-0 bg-black/40 backdrop-blur-sm hidden items-center justify-center p-5 z-50 animate-fadeIn" id="formModal" aria-hidden="true">
  <div class="w-full max-w-[640px] bg-white rounded-2xl shadow-2xl overflow-hidden transform transition-all animate-slideUp">
    <!-- Modal Header -->
    <div class="bg-[#3498db] px-6 py-5 flex justify-between items-center">
      <h3 id="formTitle" class="text-xl font-bold text-white m-0">Request Document</h3>
      <button class="w-8 h-8 rounded-lg bg-white/20 hover:bg-white/30 text-white font-semibold transition-colors flex items-center justify-center" id="closeFormX">âœ•</button>
    </div>
    
    <!-- Modal Body -->
    <div class="p-6 bg-gray-50">
      <form id="docForm" class="space-y-5">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-5">
          <div>
            <label class="block text-gray-700 mb-2 text-sm font-semibold">Type of Document <span class="text-red-500">*</span></label>
            <select id="typeOfDocument" required class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl bg-white text-gray-900 focus:outline-none focus:border-[#3498db] focus:ring-4 focus:ring-[#3498db]/10 transition-all shadow-sm hover:border-gray-300">
              <option>Barangay Clearance</option>
              <option>Certificate of Indigency</option>
              <option>Certificate of Residency</option>
              <option>Barangay ID</option>
              <option>Construction Permit</option>
            </select>
          </div>
          <div>
            <label class="block text-gray-700 mb-2 text-sm font-semibold">Number of Copies <span class="text-red-500">*</span></label>
            <input id="numberOfCopies" type="number" min="1" value="1" required class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl bg-white text-gray-900 focus:outline-none focus:border-[#3498db] focus:ring-4 focus:ring-[#3498db]/10 transition-all shadow-sm hover:border-gray-300"/>
          </div>
        </div>
        
        <div>
          <label class="block text-gray-700 mb-2 text-sm font-semibold">Requester's Name <span class="text-red-500">*</span></label>
          <input id="requesterName" type="text" required class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl bg-white text-gray-900 focus:outline-none focus:border-[#3498db] focus:ring-4 focus:ring-[#3498db]/10 transition-all shadow-sm hover:border-gray-300"/>
        </div>
        
        <div>
          <label class="block text-gray-700 mb-2 text-sm font-semibold">Requester's Address <span class="text-red-500">*</span></label>
          <input id="address" type="text" required class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl bg-white text-gray-900 focus:outline-none focus:border-[#3498db] focus:ring-4 focus:ring-[#3498db]/10 transition-all shadow-sm hover:border-gray-300"/>
        </div>
        
        <div>
          <label class="block text-gray-700 mb-2 text-sm font-semibold">Purpose <span class="text-red-500">*</span></label>
          <input id="purpose" type="text" placeholder="e.g. Employment, Scholarship" required class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl bg-white text-gray-900 focus:outline-none focus:border-[#3498db] focus:ring-4 focus:ring-[#3498db]/10 transition-all shadow-sm hover:border-gray-300"/>
        </div>
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-5">
          <div>
            <label class="block text-gray-700 mb-2 text-sm font-semibold">Payment Method</label>
            <select id="paymentMethod" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl bg-white text-gray-900 focus:outline-none focus:border-[#3498db] focus:ring-4 focus:ring-[#3498db]/10 transition-all shadow-sm hover:border-gray-300">
              <option value="">Select Payment Method</option>
              <option>GCash</option>
              <option>GoTyme</option>
              <option>Local Bank</option>
            </select>
          </div>
          <div>
            <label class="block text-gray-700 mb-2 text-sm font-semibold">Payment Status</label>
            <select id="paymentStatus" class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl bg-white text-gray-900 focus:outline-none focus:border-[#3498db] focus:ring-4 focus:ring-[#3498db]/10 transition-all shadow-sm hover:border-gray-300">
              <option value="">No payment found</option>
              <option>Successfully Paid</option>
              <option>Pending</option>
              <option>Failed</option>
            </select>
          </div>
        </div>
        
        <input type="hidden" id="docId"/>
      </form>
    </div>
    
    <!-- Modal Footer -->
    <div class="flex justify-end gap-3 px-6 py-4 bg-white border-t border-gray-200">
      <button class="px-5 py-2.5 rounded-xl border-2 border-gray-300 bg-white text-gray-700 font-semibold hover:bg-gray-50 hover:border-gray-400 transition-all shadow-sm" id="cancelForm">Cancel</button>
      <button class="px-5 py-2.5 rounded-xl bg-[#3498db] hover:bg-[#2980b9] text-white font-semibold transition-all shadow-lg hover:shadow-xl" id="saveForm">Submit Request</button>
    </div>
  </div>
</div>

<style>
  @keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }
  @keyframes slideUp {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
  }
  .animate-fadeIn { animation: fadeIn 0.2s ease-out; }
  .animate-slideUp { animation: slideUp 0.3s ease-out; }
</style>

<script defer src="/user/user-document-permits.js"></script>
</body>
</html>

